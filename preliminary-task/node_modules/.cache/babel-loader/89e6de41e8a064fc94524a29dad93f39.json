{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lnr99\\\\Documents\\\\wanted-pre-onboarding-frontend\\\\src\\\\components\\\\SignInForm\\\\SignInForm.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport * as S from \"./SignInForm.styled\";\nimport useValidate from \"../../hooks/useValidate\";\nimport { signInApi } from \"../../apis/auth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst SignInForm = () => {\n  _s();\n\n  const [emailIsValidated, emailWarnList, onCheckEmail] = useValidate(\"email\");\n  const [passwordIsValidated, passwordWarnList, onCheckPassword] = useValidate(\"password\");\n  const [userInfo, setUserInfo] = useState({\n    email: \"\",\n    password: \"\"\n  });\n  const navigate = useNavigate();\n  const token = localStorage.getItem(\"access_token\");\n  useEffect(() => {\n    if (token) {\n      navigate(\"/todo\", {\n        replace: true\n      });\n    }\n  }, [token]);\n  const handleInputValue = useCallback(key => e => {\n    setUserInfo({ ...userInfo,\n      [key]: e.target.value\n    });\n\n    if (key === \"email\") {\n      onCheckEmail(e.target.value);\n    }\n\n    if (key === \"password\") {\n      onCheckPassword(e.target.value);\n    }\n  }, [userInfo]);\n\n  const onSubmit = e => {\n    e.preventDefault();\n    signInApi(userInfo.email, userInfo.password).then(res => {\n      e.target.reset();\n      console.log(\"signin success\");\n      localStorage.setItem(\"access_token\", res.data.access_token);\n      alert(\"로컬 스토리지에 토큰이 있습니다. TODO 페이지로 이동합니다.\");\n      navigate(\"/todo\");\n    }).catch(err => {\n      console.log(err.response.data.message);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(S.Wrapper, {\n    children: [/*#__PURE__*/_jsxDEV(S.Title, {\n      children: \"\\uB85C\\uADF8\\uC778\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(S.Form, {\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(S.Label, {\n        htmlFor: \"email\",\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.Input, {\n        label: \"\\uC774\\uBA54\\uC77C\",\n        id: \"email\",\n        type: \"text\",\n        placeholder: \"\\uC774\\uBA54\\uC77C\\uC744 \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n        \"data-testid\": \"email-input\",\n        required: true,\n        onChange: handleInputValue(\"email\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.ErrorText, {\n        children: emailWarnList === null || emailWarnList === void 0 ? void 0 : emailWarnList.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: item\n        }, item, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.Label, {\n        htmlFor: \"password\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.Input, {\n        label: \"\\uBE44\\uBC00\\uBC88\\uD638\",\n        id: \"password\",\n        type: \"text\",\n        placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694.\",\n        \"data-testid\": \"password-input\",\n        required: true,\n        onChange: handleInputValue(\"password\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.ErrorText, {\n        children: passwordWarnList === null || passwordWarnList === void 0 ? void 0 : passwordWarnList.map(item => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: item\n        }, item, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(S.Button, {\n        \"data-testid\": \"signin-button\",\n        disabled: !emailIsValidated || !passwordIsValidated,\n        children: /*#__PURE__*/_jsxDEV(S.ButtonText, {\n          children: \"\\uB85C\\uADF8\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n};\n\n_s(SignInForm, \"0ObPyMBVNZszTgPXqxce+Rw0fxI=\", false, function () {\n  return [useValidate, useValidate, useNavigate];\n});\n\n_c = SignInForm;\nexport default SignInForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"SignInForm\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","useNavigate","S","useValidate","signInApi","SignInForm","emailIsValidated","emailWarnList","onCheckEmail","passwordIsValidated","passwordWarnList","onCheckPassword","userInfo","setUserInfo","email","password","navigate","token","localStorage","getItem","replace","handleInputValue","key","e","target","value","onSubmit","preventDefault","then","res","reset","console","log","setItem","data","access_token","alert","catch","err","response","message","map","item"],"sources":["C:/Users/lnr99/Documents/wanted-pre-onboarding-frontend/src/components/SignInForm/SignInForm.jsx"],"sourcesContent":["import React, { useState, useCallback, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport * as S from \"./SignInForm.styled\";\r\nimport useValidate from \"../../hooks/useValidate\";\r\nimport { signInApi } from \"../../apis/auth\";\r\n\r\nconst SignInForm = () => {\r\n  const [emailIsValidated, emailWarnList, onCheckEmail] = useValidate(\"email\");\r\n  const [passwordIsValidated, passwordWarnList, onCheckPassword] = useValidate(\"password\");\r\n  const [userInfo, setUserInfo] = useState({\r\n    email: \"\",\r\n    password: \"\",\r\n  });\r\n  \r\n  const navigate = useNavigate();\r\n\r\n  const token = localStorage.getItem(\"access_token\");\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      navigate(\"/todo\", { replace: true });\r\n    }\r\n  }, [token]);\r\n\r\n  const handleInputValue = useCallback(\r\n    (key) => (e) => {\r\n      setUserInfo({ ...userInfo, [key]: e.target.value });\r\n\r\n      if (key === \"email\") {\r\n        onCheckEmail(e.target.value);\r\n      }\r\n      if (key === \"password\") {\r\n        onCheckPassword(e.target.value);\r\n      }\r\n    },\r\n    [userInfo]\r\n  );\r\n\r\n  const onSubmit = (e) => {\r\n    e.preventDefault();\r\n    signInApi(userInfo.email, userInfo.password)\r\n      .then((res) => {\r\n        e.target.reset();\r\n        console.log(\"signin success\");\r\n        localStorage.setItem(\"access_token\", res.data.access_token);\r\n        alert(\"로컬 스토리지에 토큰이 있습니다. TODO 페이지로 이동합니다.\");\r\n        navigate(\"/todo\");\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.response.data.message);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <S.Wrapper>\r\n      <S.Title>로그인</S.Title>\r\n      <S.Form onSubmit={onSubmit}>\r\n        <S.Label htmlFor=\"email\">Email</S.Label>\r\n        <S.Input\r\n          label=\"이메일\"\r\n          id=\"email\"\r\n          type=\"text\"\r\n          placeholder=\"이메일을 입력해주세요.\"\r\n          data-testid=\"email-input\"\r\n          required\r\n          onChange={handleInputValue(\"email\")}\r\n        />\r\n        <S.ErrorText>\r\n          {emailWarnList?.map((item) => (\r\n            <div key={item}>{item}</div>\r\n          ))}\r\n        </S.ErrorText>\r\n\r\n        <S.Label htmlFor=\"password\">Password</S.Label>\r\n        <S.Input\r\n          label=\"비밀번호\"\r\n          id=\"password\"\r\n          type=\"text\"\r\n          placeholder=\"비밀번호를 입력해주세요.\"\r\n          data-testid=\"password-input\"\r\n          required\r\n          onChange={handleInputValue(\"password\")}\r\n        />\r\n        <S.ErrorText>\r\n          {passwordWarnList?.map((item) => (\r\n            <div key={item}>{item}</div>\r\n          ))}\r\n        </S.ErrorText>\r\n\r\n        <S.Button\r\n          data-testid=\"signin-button\"\r\n          disabled={!emailIsValidated || !passwordIsValidated}\r\n        >\r\n          <S.ButtonText>로그인</S.ButtonText>\r\n        </S.Button>\r\n      </S.Form>\r\n    </S.Wrapper>\r\n  );\r\n}\r\n\r\nexport default SignInForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}